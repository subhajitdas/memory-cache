{"version":3,"sources":["../test.js"],"names":[],"mappings":"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","file":"test.js","sourcesContent":["import {MemoryCache} from './index';\r\nimport 'should';\r\nimport 'should-sinon';\r\nimport * as sinon from 'sinon';\r\n\r\ndescribe('MemoryCache', function() {\r\n    it('should be available', function() {\r\n        let cache = new MemoryCache();\r\n        cache.should.be.Object();\r\n    });\r\n    it('should be able to add an item in cache', function() {\r\n        let cache = new MemoryCache();\r\n        (function() {\r\n            cache.set('key1', 'value1');\r\n        }).should.not.throw();\r\n        cache.Size.should.be.exactly(1);\r\n        cache._cacheStore.has('key1').should.be.true();\r\n        \r\n        (function() {\r\n            cache.set('key2', 'value2', 100);\r\n        }).should.not.throw();\r\n        cache.Size.should.be.exactly(2);\r\n        cache._cacheStore.has('key2').should.be.true();\r\n        \r\n        (function() {\r\n            cache.set('key3', 'value3', 100, function(key) {\r\n                console.log(key);\r\n            });\r\n        }).should.not.throw();\r\n        cache.Size.should.be.exactly(3);\r\n        cache._cacheStore.has('key3').should.be.true();\r\n    });\r\n    it('should be able get the size of the cache', function() {\r\n        let cache = new MemoryCache();\r\n        cache.set('key1', 'value1', 25);\r\n        cache.set('key2', 'value2');\r\n        cache.set('key3', 'value3', 25, function(key) {\r\n            console.log(key)\r\n        });\r\n        cache.Size.should.be.exactly(3);\r\n    });\r\n    it('should be able to check if cache contains an item', function() {\r\n        let cache = new MemoryCache();\r\n        cache.set('key1', 'value1', 25);\r\n        cache.set('key2', 'value2');\r\n        cache.set('key3', 'value3', 25, function(key) {\r\n            console.log(key)\r\n        });\r\n        cache.contains('key1').should.be.true();\r\n        cache.contains('key2').should.be.true();\r\n        cache.contains('key5').should.not.be.true();\r\n    });\r\n    it('should be able to retrieve an item from cache stored without a timeout', function(done) {\r\n        let cache = new MemoryCache();\r\n        cache.set('key1', 'value1');\r\n        cache.set('key2', 'value2');\r\n        cache.set('key3', 'value3');\r\n        cache.get('key2').should.be.exactly('value2');\r\n        setTimeout(function() {\r\n            cache.get('key2').should.be.exactly('value2');\r\n            done();\r\n        }, 25);\r\n    });\r\n    it('should be able to retrieve an item from cache till timeout', function(done) {\r\n        let cache = new MemoryCache();\r\n        cache.set('key1', 'value1', 40);\r\n        cache.set('key2', 'value2', 20);\r\n        cache.set('key3', 'value3', 60);\r\n        cache.get('key1').should.be.exactly('value1');\r\n        setTimeout(function() {\r\n            cache.get('key2').should.be.exactly('value2');\r\n            done();\r\n        }, 18);\r\n    });\r\n    it('should remove cached items after timeout', function(done) {\r\n        let cache = new MemoryCache();\r\n        cache.set('key1', 'value1', 40);\r\n        cache.set('key2', 'value2', 20);\r\n        cache.set('key3', 'value3', 60);\r\n        cache.Size.should.be.exactly(3);\r\n        setTimeout(function() {\r\n            cache.contains('key1').should.be.true();\r\n            cache.get('key1').should.be.ok();\r\n            cache.contains('key2').should.be.false();\r\n            //cache.get('key2').should.not.be.ok();\r\n            cache.contains('key3').should.be.true();\r\n            cache.get('key3').should.be.ok();\r\n            cache.Size.should.be.exactly(2);\r\n            done();\r\n        }, 21);\r\n    });\r\n    it('should call the callback when timeout occures', function(done) {\r\n        let cache = new MemoryCache(),\r\n            callback1 = sinon.spy(),\r\n            callback2 = sinon.spy();\r\n        cache.set('key1', 'value1', 40, callback1);\r\n        cache.set('key2', 'value2', 20, callback2);\r\n        cache.set('key3', 'value3', 60);\r\n        setTimeout(function() {\r\n            callback1.should.not.be.called();\r\n            callback2.should.be.calledWith('key2');\r\n            done();\r\n        }, 25);\r\n    });\r\n    it('should be able to remove an item from cache', function() {\r\n        let cache = new MemoryCache();\r\n        cache.set('key1', 'value1', 25);\r\n        cache.set('key2', 'value2');\r\n        cache.set('key3', 'value3', 25, function(key) {\r\n            console.log(key)\r\n        });\r\n        cache.Size.should.be.exactly(3);\r\n        cache.remove('key1');\r\n        cache.Size.should.be.exactly(2);\r\n        cache.remove('key2');\r\n        cache.Size.should.be.exactly(1);\r\n        cache.remove('key3');\r\n        cache.Size.should.be.exactly(0);\r\n    });\r\n    it('should be able to clear the cache', function() {\r\n        let cache = new MemoryCache();\r\n        cache.set('key1', 'value1', 25);\r\n        cache.set('key2', 'value2');\r\n        cache.set('key3', 'value3', 25, function(key) {\r\n            console.log(key)\r\n        });\r\n        cache.Size.should.be.exactly(3);\r\n        cache.clear();\r\n        cache.Size.should.be.exactly(0);\r\n    });\r\n});"]}